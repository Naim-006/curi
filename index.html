<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
        canvas {
            border: 1px solid black;
            display: block;
            margin: 0 auto;
        }

        #directionButtons {
            text-align: center;
            margin-top: 10px;
            
            
        }
        #upButton{

            margin-left: 20%;


        }
        #downButton{

margin-left: 20%;
        }
        #leftButton{

margin-right: 0%;


}
#rightButton{

margin-right: 20%;
}

        .directionButton {
            margin: 5px;
            padding: 5px 10px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="600" height="400"></canvas>
    <div id="info">
        <p>Score: <span id="score">0</span></p>
        <p>High Score: <span id="highScore">0</span></p>
        <p>Last Scores: <span id="lastScores"></span></p>
        <label for="speed">Snake Speed:</label>
        <input type="range" id="speed" min="1" max="20" value="10">
    </div>
    <div id="directionButtons">
      
        <button class="directionButton" id="upButton">▲</button><br>
        <button class="directionButton" id="leftButton">◀</button>
        <button class="directionButton" id="rightButton">▶</button><br>
        
        <button class="directionButton" id="downButton">▼</button>
    </div>

    <script>
        const CELL_SIZE = 20;
        const GRID_WIDTH = 600 / CELL_SIZE;
        const GRID_HEIGHT = 400 / CELL_SIZE;

        let snake = {
            body: [{ x: GRID_WIDTH / 2, y: GRID_HEIGHT / 2 }],
            direction: "RIGHT",
            grow: false
        };

        let food = { x: 0, y: 0 };

        let gameCanvas = document.getElementById("gameCanvas");
        let ctx = gameCanvas.getContext("2d");

        let score = 0;
        let highScore = localStorage.getItem("highScore") || 0;
        let lastScores = [];
        const MAX_LAST_SCORES = 3;

        let snakeSpeed = 10;
        let gameLoop;

        let foodImg = new Image();
        foodImg.src = "https://i.pinimg.com/originals/ea/7b/12/ea7b12995b3891440f2af71a9d76a81c.png"; // Replace with the path to your food image

        let snakeHeadImg = new Image();
        snakeHeadImg.src = "https://i.imgur.com/9tJwncM.pnghttps://c8.alamy.com/comp/DJ5DT9/anatomical-model-of-a-snake-head-DJ5DT9.jpg"; // Replace with the path to your snake head image

        function drawSnake() {
            snake.body.forEach(segment => {
                let x = segment.x * CELL_SIZE + CELL_SIZE / 2;
                let y = segment.y * CELL_SIZE + CELL_SIZE / 2;
                fillEllipse(ctx, x, y, CELL_SIZE / 2, CELL_SIZE / 2, "green");
            });
        }

        // Function to draw an ellipse
        function fillEllipse(ctx, x, y, radiusX, radiusY, color) {
            ctx.beginPath();
            ctx.fillStyle = color;
            ctx.ellipse(x, y, radiusX, radiusY, 0, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawFood() {
            ctx.drawImage(foodImg, food.x * CELL_SIZE, food.y * CELL_SIZE, CELL_SIZE, CELL_SIZE);
        }

        function moveSnake() {
            let head = { x: snake.body[0].x, y: snake.body[0].y };

            switch (snake.direction) {
                case "UP":
                    head.y -= 1;
                    if (head.y < 0) head.y = GRID_HEIGHT - 1;
                    break;
                case "DOWN":
                    head.y += 1;
                    if (head.y >= GRID_HEIGHT) head.y = 0;
                    break;
                case "LEFT":
                    head.x -= 1;
                    if (head.x < 0) head.x = GRID_WIDTH - 1;
                    break;
                case "RIGHT":
                    head.x += 1;
                    if (head.x >= GRID_WIDTH) head.x = 0;
                    break;
            }

            if (isSnakeCollision(head)) {
                clearInterval(gameLoop);
                if (score > highScore) {
                    highScore = score;
                    localStorage.setItem("highScore", highScore);
                    document.getElementById("highScore").textContent = highScore;
                }
                alert("Game Over! Your Score: " + score);
                recordScore(score);
                reloadGame();
                return;
            }

            snake.body.unshift(head);

            if (head.x === food.x && head.y === food.y) {
                snake.grow = true;
                score++;
                document.getElementById("score").textContent = score;
                generateFood();
            } else if (!snake.grow) {
                snake.body.pop();
            } else {
                snake.grow = false;
            }
        }

        function generateFood() {
            food.x = Math.floor(Math.random() * GRID_WIDTH);
            food.y = Math.floor(Math.random() * GRID_HEIGHT);
        }

        function isSnakeCollision(head) {
            return snake.body.slice(1).some(segment => segment.x === head.x && segment.y === head.y);
        }

        function update() {
            ctx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
            moveSnake();
            drawSnake();
            drawFood();
        }

        function handleKeyPress(event) {
            switch (event.key) {
                case "ArrowUp":
                    if (snake.direction !== "DOWN")
                        snake.direction = "UP";
                    break;
                case "ArrowDown":
                    if (snake.direction !== "UP")
                        snake.direction = "DOWN";
                    break;
                case "ArrowLeft":
                    if (snake.direction !== "RIGHT")
                        snake.direction = "LEFT";
                    break;
                case "ArrowRight":
                    if (snake.direction !== "LEFT")
                        snake.direction = "RIGHT";
                    break;
            }
        }

        function reloadGame() {
            score = 0;
            document.getElementById("score").textContent = score;
            snake = {
                body: [{ x: GRID_WIDTH / 2, y: GRID_HEIGHT / 2 }],
                direction: "RIGHT",
                grow: false
            };
            generateFood();
            clearInterval(gameLoop);
            gameLoop = setInterval(update, 1000 / snakeSpeed);
        }

        function recordScore(score) {
            lastScores.unshift(score);
            if (lastScores.length > MAX_LAST_SCORES) {
                lastScores.pop();
            }
            let lastScoresText = lastScores.join(", ");
            document.getElementById("lastScores").textContent = lastScoresText;
        }

        window.addEventListener("keydown", handleKeyPress);

        document.getElementById("speed").addEventListener("input", function () {
            snakeSpeed = parseInt(this.value);
            clearInterval(gameLoop);
            gameLoop = setInterval(update, 1000 / snakeSpeed);
        });

        // Directional buttons event listeners
        document.getElementById("upButton").addEventListener("click", function () {
            if (snake.direction !== "DOWN")
                snake.direction = "UP";
        });

        document.getElementById("downButton").addEventListener("click", function () {
            if (snake.direction !== "UP")
                snake.direction = "DOWN";
        });

        document.getElementById("leftButton").addEventListener("click", function () {
            if (snake.direction !== "RIGHT")
                snake.direction = "LEFT";
        });

        document.getElementById("rightButton").addEventListener("click", function () {
            if (snake.direction !== "LEFT")
                snake.direction = "RIGHT";
        });

        document.getElementById("highScore").textContent = highScore;
        reloadGame();
    </script>
</body>
</html>
